{% extends "base.html" %}
{% block title %}Voting{% endblock %}
{% block og-title %}{{ poll.text }}{% endblock %}
{% block og-description %}Vote now{% endblock %}
{% block content %}
<section class="content">
    <h1 name="poll-text" class="text-center">{{ poll.text }}</h1>
    <form method="POST" action="{% url 'poll' poll.uid %}">
        {% for choice in poll.choice_set.all %}
        <div class="vote-option">
            <input id="{{ choice.text }}-id" type="radio" name="choice_id" value="{{ choice.id }}" {% if forloop.first %}checked{% endif %}>
            <label for="{{ choice.text }}-id" name="choice_label">{{ choice.text }}</label>
        </div>
        {% endfor %}
        <button class="btn btn-success btn-lg" name="vote" type="submit">Vote</button>
        {% csrf_token %}
    </form>
</section>
<section class="content">
    {% url "poll" poll.uid as current_url %} 
    {% with full_url=request.scheme|add:'://'|add:request.get_host|add:current_url %} 
    <div>
        <i class="fas fa-share"></i>
        Share this poll
    </div>
    <div>
        <input class="form-control" type="text" value="{{ full_url }}" readonly>
    </div>
    <div class="p-1">
        <a href="https://www.facebook.com/sharer/sharer.php?u={{ full_url|urlencode:"" }}" rel="nofollow" target="_blank"><img class="fab fa-facebook fa-3x" width="50" height="50"></a>
    </div>
    {% endwith %}
</section>
{% endblock %}